# Multi-Cam Sprite Renderer - Godot Import Plugin

This Godot plugin automatically imports sprite sheets generated by the Multi-Cam Sprite Renderer Blender addon. It reads `metadata.json` files and creates Godot `SpriteFrames` resources with proper animations and materials for normal mapping.

## Features

- **Automatic Import**: Simply drag and drop `metadata.json` files into your Godot project
- **Animation Support**: Creates animations from sprite sheet data with proper frame timings
- **Normal Map Integration**: Automatically sets up materials with normal maps for 2D lighting
- **2D and 3D Modes**: Supports both traditional 2D sprites and 3D billboard sprites
- **Multiple Camera Angles**: Handles sprite sheets generated from multiple camera positions

## Installation

1. Copy the `godot_plugin` folder to your Godot project's `addons` directory as `addons/mcsr_importer/`
2. Enable the plugin in Project Settings > Plugins
3. The plugin will automatically handle `metadata.json` files when they are imported

## Usage

### Basic Import

1. Export sprite sheets from the Multi-Cam Sprite Renderer Blender addon
2. Copy the generated files (including `metadata.json`) to your Godot project
3. The plugin will automatically detect and import the `metadata.json` file
4. A `SpriteFrames` resource will be created with all animations and frames
5. If normal maps are present, a material will also be created

### Import Options

When importing, you can choose between two modes:

#### 2D Mode (Default)
- Creates `CanvasItemMaterial` for 2D sprites
- Best for traditional 2D games
- Use with `Sprite2D` or `AnimatedSprite2D` nodes

#### 3D Billboard Mode  
- Creates `StandardMaterial3D` for 3D billboard sprites
- Best for 2.5D games or 3D environments with 2D sprites
- Use with `MeshInstance3D` nodes with plane meshes

### Using the Generated Resources

#### For 2D Games:
```gdscript
# In your script
@export var sprite_frames: SpriteFrames
@export var sprite_material: CanvasItemMaterial

func _ready():
    # Apply to AnimatedSprite2D
    var animated_sprite = $AnimatedSprite2D
    animated_sprite.sprite_frames = sprite_frames
    animated_sprite.material = sprite_material
    animated_sprite.play("idle")  # Replace with your animation name
```

#### For 3D Games:
```gdscript
# In your script  
@export var sprite_frames: SpriteFrames
@export var sprite_material: StandardMaterial3D

func _ready():
    # Apply to MeshInstance3D with QuadMesh
    var mesh_instance = $MeshInstance3D
    var quad_mesh = QuadMesh.new()
    mesh_instance.mesh = quad_mesh
    mesh_instance.material_override = sprite_material
```

## File Structure

The plugin expects the following file structure from the Blender addon:

```
project_folder/
├── metadata.json
└── action_name/
    └── camera_0/
        ├── diffuse.png
        ├── normal.png
        └── ...
```

## Supported Metadata Format

The plugin reads `metadata.json` files with this structure:

```json
{
  "fps": 24,
  "frameDimensions": {
    "width": 1024,
    "height": 1024
  },
  "passes": ["diffuse", "normal"],
  "actions": [
    {
      "name": "idle",
      "sprites": [
        {
          "x": 0,
          "y": 0,
          "frames": 1
        },
        {
          "x": 1024,
          "y": 0,
          "frames": 2
        }
      ]
    }
  ]
}
```

## Troubleshooting

### Import Not Working
- Ensure the file is named `metadata.json`
- Check that the JSON structure matches the expected format
- Verify that sprite sheet images exist in the expected locations

### Missing Textures
- The plugin looks for textures in multiple locations:
  - `action_name/camera_0/pass_name.png`
  - `action_name/pass_name.png`  
  - `pass_name.png`
- Ensure your sprite sheet files follow one of these patterns

### Normal Maps Not Applied
- Check that "normal" is listed in the `passes` array in metadata.json
- Ensure normal map files exist alongside diffuse textures
- Verify that "Create Normal Material" is enabled in import options

## License

This plugin is part of the Multi-Cam Sprite Renderer project and follows the same license terms.